<div class="search-container">
  <h1>Buscador de juegos</h1>

  <div class="controls-container">
    <div class="search-bar">
      <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
      </svg>
      <input class="search-input" type="text" (input)="onSearch($event)" placeholder="Introduce el nombre del juego">
    </div>

    <div class="filter-container">
      <svg class="filter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/>
      </svg>
      <select id="sort-by" class="sort-select" (change)="onSortChange($event)">
        <option value="relevance">Relevancia</option>
        <option value="name-asc">Nombre (A-Z)</option>
        <option value="name-desc">Nombre (Z-A)</option>
        <option value="date-desc">Fecha (Más nuevos)</option>
        <option value="date-asc">Fecha (Más antiguos)</option>
      </select>
    </div>
  </div>

  <div *ngIf="games$ | async as games">
    <ul *ngIf="hasResults; else noResults" class="results-list">
      <li *ngFor="let game of games" class="game-item">
        <img [src]="game.coverImageUrl" alt="{{ game.name }} cover" class="game-cover">
        <div class="game-info">
          <h3 class="game-name">{{ game.name }}</h3>
          <p class="game-release-date" *ngIf="game.releaseDate">
            Release Date: {{ game.releaseDate | date: 'longDate' }}
          </p>
          <div class="game-genres" *ngIf="game.genres?.length">
            <span *ngFor="let genre of game.genres" class="genre-tag">{{ genre }}</span>
          </div>
        </div>
      </li>
    </ul>

    <ng-template #noResults>
      <div class="no-results" *ngIf="lastSearchTerm">
        <p>No se encontraron juegos para "<strong>{{ lastSearchTerm }}</strong>"</p>
      </div>
    </ng-template>
  </div>

  <footer class="footer">
    <p>Creado por Francisco José Soler Conchello º 2026</p>
  </footer>
</div>
